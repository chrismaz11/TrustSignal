generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Receipt {
  id               String   @id @default(uuid())
  receiptHash      String
  inputsCommitment String
  policyProfile    String
  parcelId         String?
  decision         String
  reasons          String
  riskScore        Int
  checks           String
  rawInputs        String
  createdAt        DateTime @default(now())
  anchorStatus     String   @default("PENDING")
  anchorTxHash     String?
  anchorChainId    String?
  anchorId         String?
  fraudRisk        String? // JSON
  zkpAttestation   String? // JSON
  revoked          Boolean  @default(false)
}

model Property {
  parcelId     String    @id
  currentOwner String
  lastSaleDate DateTime?
  updatedAt    DateTime  @updatedAt
}

model CountyRecord {
  parcelId String  @id
  county   String
  state    String
  active   Boolean @default(true)
}

model Notary {
  id              String @id
  name            String
  status          String
  commissionState String
}

model RequestLog {
  id        String   @id @default(uuid())
  endpoint  String
  method    String
  timestamp DateTime @default(now())
  ip        String?
  userAgent String?
  receiptId String?
  status    Int
}

model Organization {
  id         String   @id @default(uuid())
  name       String
  adminEmail String
  apiKey     String   @unique
  createdAt  DateTime @default(now())
}
